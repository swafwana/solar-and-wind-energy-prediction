<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>View Replies</title>
  <!-- Bootstrap 5 CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <!-- DataTables CSS -->
  <link href="https://cdn.datatables.net/1.13.6/css/dataTables.bootstrap5.min.css" rel="stylesheet">
</head>
<body>
  <div class="container mt-5">
    <h3 class="mb-4">View Replies</h3>

    <!-- Date Filter Inputs -->
    <div class="row mb-3">
      <div class="col-md-4">
        <label for="fromDate" class="form-label">From Date</label>
        <input type="date" id="fromDate" name="fromDate" class="form-control">
      </div>
      <div class="col-md-4">
        <label for="toDate" class="form-label">To Date</label>
        <input type="date" id="toDate" name="toDate" class="form-control">
      </div>
    </div>

    <!-- Complaints Table -->
    <div class="table-responsive">
      <table class="table table-bordered table-hover" id="complaintTable">
        <thead class="table-light">
          <tr>
            <th>Slno</th>
            <th>Time</th>
            <th>temperature_2m</th>
            <th>relativehumidity_2m</th>
           <th>dewpoint_2m</th>
              <th>windspeed_10m</th>
              <th>windspeed_100m</th>
              <th>winddirection_10m</th>
              <th>winddirection_100m</th>
              <th>windgusts_10m</th>
              <th>Power</th>

          </tr>
        </thead>
        <tbody>
          <!-- Sample Data Rows -->

          {% for i in c %}

          <tr>
            <td>{{ forloop.counter }}</td>
            <td>{{ i.0 }}</td>
            <td>{{ i.1 }}</td>
            <td>{{ i.2 }}</td>
            <td>{{ i.3 }}</td>
            <td>{{ i.4 }}</td>
            <td>{{ i.5 }}</td>
            <td>{{ i.6 }}</td>
            <td>{{ i.7 }}</td>
            <td>{{ i.8 }}</td>
            <td>{{ i.9 }}</td>

         {% endfor %}
          <!--


          <!-- Add more rows as needed -->
        </tbody>
      </table>
    </div>
  </div>

  <!-- Scripts -->
  <script src="https://code.jquery.com/jquery-3.7.0.min.js"></script>
  <script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>
  <script src="https://cdn.datatables.net/1.13.6/js/dataTables.bootstrap5.min.js"></script>

  <script>
    // Extend DataTables with custom date filtering
    $.fn.dataTable.ext.search.push(function (settings, data, dataIndex) {
      const min = document.getElementById('fromDate').value;
      const max = document.getElementById('toDate').value;
      const dateStr = data[1]; // Date is column index 1
      const date = new Date(dateStr);

      const minDate = min ? new Date(min) : null;
      const maxDate = max ? new Date(max) : null;

      if ((!minDate || date >= minDate) && (!maxDate || date <= maxDate)) {
        return true;
      }
      return false;
    });

    // Initialize DataTable and bind filter events
    $(document).ready(function () {
      const table = $('#complaintTable').DataTable({
        pageLength: 5
      });

      $('#fromDate, #toDate').on('change', function () {
        table.draw();
      });
    });
  </script>
</body>
</html>
